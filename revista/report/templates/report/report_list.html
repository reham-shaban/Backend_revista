{% extends 'base.html' %} {% block content %}

<div class="role">{{user.role}}</div>

<!-- App Bar to choose Report Status -->
{% if user.role == 'admin' %}
  <div class="status-app-bar">
    <a href="/report/?status=redirected">Redirected</a>
    <a href="/report/?status=resolved">Resolved</a>
  </div>
{% endif %}

 <!-- App Bar to choose Report Type -->
<div class="type-app-bar">
  <a href="/report/?type=chat{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}">Chat</a>
  <a href="/report/?type=user{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}">User</a>
  <a href="/report/?type=post{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}">Post</a>
</div>

<!-- Drop down to choose Category -->
<div class="category-dropdown">
  <label for="reportCategory" style="font-size: 1rem; padding: 5px; font-weight: 800;">
    Choose a Category:
  </label>

  <select name="reportCategory" id="reportCategory" onchange="navigate()" style="padding: 5px; font-size: 16px; border: 1px solid #ccc;">
    <option value="/report/?{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}" {% if not request.GET.category %}selected{% endif %} style="background-color: #f2f2f2;">All</option>
    <option value="/report/?category=spam{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}" {% if request.GET.category == 'spam' %}selected{% endif %} style="background-color: #f2f2f2;">Spam</option>
    <option value="/report/?category=harassment{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}" {% if request.GET.category == 'harassment' %}selected{% endif %} style="background-color: #e0e0e0;">Harassment</option>
    <option value="/report/?category=inappropriate-content{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}{% if request.GET.type %}&type={{ request.GET.type }}{% endif %}" {% if request.GET.category == 'inappropriate-content' %}selected{% endif %} style="background-color: #f2f2f2;">Inappropriate content</option>
  </select>
</div>

<script>
  function navigate() {
    var selectElement = document.getElementById("reportCategory");
    var selectedValue = selectElement.options[selectElement.selectedIndex].value;
    if (selectedValue) {
      window.location.href = selectedValue;
    }
  }
</script>

<!-- Report List -->
{% if reports %} 
  {% for report in reports %}
    <h3>
      <a href="/report/{{report.id}}" style="color: black">
        <div class="report-container">
          <p><b>Category : </b> {{ report.category }}</p>
          <p><b>Reporter : </b> {{ report.reporter }}
          - <b>Reported : </b> {{ report.reported_user }}</p>         
          {% if report.description %}<p>{{ report.description }}</p>{% endif %}            
        </div>
      </a>
    </h3>
  {% endfor %} 
{% else %}
<p>No reports added yet.</p>
{% endif %} 
{% endblock %}
