{% extends 'base.html' %} {% block content %}

<div class="role">{{user.role}}</div>

<!-- Choose Status -->
{% if user.role == 'admin' %}
  <p>
    <a href="/report/?status=redirected">Redirected</a> -
    <a href="/report/?status=resolved">Resolved</a>
  </p>
{% endif %}

<!-- Drop Down -->
<div style="display: flex; flex-direction: column; align-items: flex-start;">
  <label for="reportType" style="font-size: 1rem; padding: 5px; font-weight: 800;">
      Choose a type:
  </label>

  <select name="reportType" id="reportType" onchange="navigate()" style="padding: 5px; font-size: 16px; border: 1px solid #ccc;">
      <option value="" disabled selected>----</option>
      <option value="/report/?type=chat{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}" style="background-color: #f2f2f2;">Chat</option>
      <option value="/report/?type=user{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}" style="background-color: #e0e0e0;">User</option>
      <option value="/report/?type=post{% if request.GET.status %}&status={{ request.GET.status }}{% endif %}" style="background-color: #f2f2f2;">Post</option>
  </select>
</div>

<script>
  function navigate() {
      var selectElement = document.getElementById("reportType");
      var selectedValue = selectElement.options[selectElement.selectedIndex].value;
      if (selectedValue) {
          window.location.href = selectedValue;
      }
  }
</script>

<style>
  .report-container {
    width: 600px;
    border: 2px solid #ff0000;
    background-color: #fee8e8;
    border-radius: 5px;
    padding: 20px;
    margin: 20px auto;
  }
</style>

<!-- Report List -->
{% if reports %} 
  {% for report in reports %}
    <h3>
      <a href="/report/{{report.id}}" style="color: black">
        <div class="report-container">
          <p><b>Category : </b> {{ report.category }}</p>
          <p><b>Reporter : </b> {{ report.reporter }}
          - <b>Reported : </b> {{ report.reported_user }}</p>         
          {% if report.description %}<p>{{ report.description }}</p>{% endif %}            
        </div>
      </a>
    </h3>
  {% endfor %} 
{% else %}
<p>No reports added yet.</p>
{% endif %} 
{% endblock %}
